<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>初三七班主页</title>
    <!-- MDUI CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/css/mdui.min.css">
    <style>
        body {
            background-color: #f5f5f5;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
        }
        .card {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin: 10px;
            padding: 20px;
            width: 320px;
        }
        .title {
            font-size: 24px;
            font-weight: bold;
            color: #333333;
            margin-bottom: 20px;
        }
        .content {
            font-size: 16px;
            color: #666666;
            line-height: 1.6;
        }
        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .button {
            background-color: #046dff;
            border: none;
            color: white;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }
        .button:hover {
            background-color: #046dff;
        }
        .weather {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin: 10px;
            padding: 20px;
            width: 320px;
        }
        .weather h2 {
            font-size: 20px;
            font-weight: bold;
            color: #333333;
            margin-bottom: 20px;
        }
        .weather-content {
            font-size: 16px;
            color: #666666;
            line-height: 1.6;
        }
    </style>
</head>
<body>

<div class="container">

    <!-- 时钟 -->
    <div class="card">
        <div class="title">实时北京时间时钟</div>
        <div class="content" id="clock"></div>
    </div>

    <!-- 计时器 -->
    <div class="card">
        <div class="title">计时器</div>
        <div class="content" id="timer">00:00:00.000</div>
        <div class="button-container">
            <button class="button" id="startTimer">开始计时</button>
            <button class="button" id="stopTimer">暂停计时</button>
            <button class="button" id="resetTimer">归零</button>
        </div>
    </div>

    <!-- 倒计时器 -->
    <div class="card">
        <div class="title">倒计时器</div>
        <input class="mdui-textfield-input" type="text" id="countdownTime" placeholder="请输入倒计时时间（秒）"/>
        <div class="content" id="countdownTimer">00:00:00</div>
        <div class="button-container">
            <button class="button" id="startCountdown">开始倒计时</button>
            <button class="button" id="pauseCountdown">暂停倒计时</button>
            <button class="button" id="resetCountdown">重置倒计时</button>
        </div>
    </div>

    <!-- 当前天气部分 -->
    <div class="weather" id="currentWeather">
        <h2>当前天气</h2>
        <div class="weather-content" id="currentWeatherData"></div>
    </div>

    <!-- 未来天气预报部分 -->
    <div class="weather" id="forecastWeather">
        <h2>未来天气预报</h2>
        <div class="weather-content" id="forecastWeatherData"></div>
    </div>

</div>

<!-- JavaScript -->
<script>
    // 实时北京时间时钟
    function updateClock() {
        var now = new Date();
        var hours = now.getHours();
        var minutes = now.getMinutes();
        var seconds = now.getSeconds();
        var milliseconds = now.getMilliseconds();

        var timeString = (hours < 10 ? "0" : "") + hours + ":"
            + (minutes < 10 ? "0" : "") + minutes + ":"
            + (seconds < 10 ? "0" : "") + seconds + "."
            + (milliseconds < 100 ? (milliseconds < 10 ? "00" : "0") : "") + milliseconds;

        document.getElementById('clock').innerHTML = timeString;
    }

    setInterval(updateClock, 1); // 更新时钟每毫秒一次

    // 计时器
    var timer;
    var timerRunning = false;
    var timerStart;
    var timerElapsed = 0;

    function startTimer() {
        if (!timerRunning) {
            timerStart = Date.now() - timerElapsed;
            timer = setInterval(function () {
                var elapsedTime = Date.now() - timerStart;
                var hours = Math.floor(elapsedTime / 3600000);
                var minutes = Math.floor((elapsedTime % 3600000) / 60000);
                var seconds = Math.floor((elapsedTime % 60000) / 1000);
                var milliseconds = elapsedTime % 1000;
                document.getElementById('timer').innerHTML = (hours < 10 ? "0" : "") + hours + ":" + (minutes < 10 ? "0" : "") + minutes + ":" + (seconds < 10 ? "0" : "") + seconds + "." + milliseconds;
                timerElapsed = elapsedTime;
            }, 1); // 每1毫秒更新一次
            timerRunning = true;
        }
    }

    function stopTimer() {
        clearInterval(timer);
        timerRunning = false;
    }

    function resetTimer() {
        clearInterval(timer);
        timerElapsed = 0;
        document.getElementById('timer').innerHTML = "00:00:00.000";
        timerRunning = false;
    }

    document.getElementById('startTimer').addEventListener('click', startTimer);
    document.getElementById('stopTimer').addEventListener('click', stopTimer);
    document.getElementById('resetTimer').addEventListener('click', resetTimer);

    // 倒计时器
    var countdownTimer;
    var countdownTime;
    var countdownRunning = false;

    function startCountdown() {
        if (!countdownRunning) {
            countdownTime = parseInt(document.getElementById('countdownTime').value) * 1000; // 转换为毫秒
            countdownTimer = setInterval(function () {
                if (countdownTime > 0) {
                    countdownTime -= 10;
                    var hours = Math.floor(countdownTime / 3600000);
                    var minutes = Math.floor((countdownTime % 3600000) / 60000);
                    var seconds = Math.floor((countdownTime % 60000) / 1000);
                    document.getElementById('countdownTimer').innerHTML = (hours < 10 ? "0" : "") + hours + ":" + (minutes < 10 ? "0" : "") + minutes + ":" + (seconds < 10 ? "0" : "") + seconds;
                } else {
                    clearInterval(countdownTimer);
                    alert("时间到！");
                }
            }, 10); // 每10毫秒更新一次
            countdownRunning = true;
        }
    }

    function pauseCountdown() {
        clearInterval(countdownTimer);
        countdownRunning = false;
    }

    function resetCountdown() {
        clearInterval(countdownTimer);
        countdownRunning = false;
        document.getElementById('countdownTimer').innerHTML = "00:00:00";
    }

    document.getElementById('startCountdown').addEventListener('click', startCountdown);
    document.getElementById('pauseCountdown').addEventListener('click', pauseCountdown);
    document.getElementById('resetCountdown').addEventListener('click', resetCountdown);

    // 获取当前天气信息
    function getCurrentWeather() {
        fetch('https://api.openweathermap.org/data/2.5/weather?q=Guangzhou&appid=3312dd3be53b1b5b940d6b8665ed3036')
            .then(response => response.json())
            .then(data => {
                // 解析返回的数据
                var currentWeather = `
                    温度：${(data.main.temp - 273.15).toFixed(1)}°C<br>
                    湿度：${data.main.humidity}%<br>
                    风速：${data.wind.speed} 米/秒<br>
                    天气：${data.weather[0].description}
                `;
                // 在页面上显示当前天气信息
                document.getElementById('currentWeatherData').innerHTML = currentWeather;
            })
            .catch(error => {
                console.error('获取当前天气信息时出错:', error);
            });
    }

    // 获取未来天气预报信息
    function getForecastWeather() {
        fetch('https://api.openweathermap.org/data/2.5/forecast?q=Guangzhou&appid=3312dd3be53b1b5b940d6b8665ed3036')
            .then(response => response.json())
            .then(data => {
                // 解析返回的数据
                var forecastWeather = '';
                for (var i = 0; i < data.list.length; i++) {
                    var forecast = data.list[i];
                    var forecastDate = new Date(forecast.dt * 1000);
                    var forecastDateString = forecastDate.toLocaleDateString();
                    var forecastTimeString = forecastDate.toLocaleTimeString();
                    forecastWeather += `
                        <div>${forecastDateString} ${forecastTimeString}</div>
                        <div>温度：${(forecast.main.temp - 273.15).toFixed(1)}°C</div>
                        <div>湿度：${forecast.main.humidity}%</div>
                        <div>风速：${forecast.wind.speed} 米/秒</div>
                        <div>天气：${forecast.weather[0].description}</div>
                        <br>
                    `;
                }
                // 在页面上显示未来天气预报信息
                document.getElementById('forecastWeatherData').innerHTML = forecastWeather;
            })
            .catch(error => {
                console.error('获取未来天气预报信息时出错:', error);
            });
    }

    // 页面加载时获取当前天气信息和未来天气预报信息
    window.onload = function() {
        getCurrentWeather();
        getForecastWeather();
    };
</script>

</body>
</html>
